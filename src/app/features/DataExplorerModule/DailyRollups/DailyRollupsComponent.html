<div class="text-sm lg:pt-20 pt-5">
  <div class="  pt-2 w-full" style="background-color: #FBFBFB!important">

    <app-page-header
      [title]="'Data Explorer (Daily Rollups)'"
      [subtitle]="'Find a summary of the different analysis details here'">
      <div actions class="w-100">
        <div class="flex flex-col sm:flex-row w-full items-stretch sm:items-center gap-2 sm:gap-3">
          <p-select
            [options]="savedConfigNames()"
            [ngModel]="filtersService.selectedConfigName()"
            placeholder="Select a Saved Configuration"
            (onChange)="applySelectedConfig($event.value)"
            class="w-full sm:w-64"
          />
          <button
            (click)="toggleFilterVisibility()"
            class="btn custom-btn-primary w-full sm:w-auto"
            pButton
            type="submit">
            <i class="pi pi-plus" pButtonIcon></i>
            <span pButtonLabel>Set Up Filter</span>
          </button>
          <p-split-button
            [model]="items"
            class="w-full sm:w-auto"
            label="Export Records"
            severity="contrast">
            <ng-template pTemplate="content">
              <span class="flex align-items-center font-bold">
                <i class="pi pi-download" pButtonIcon></i>
                <span class="ms-2">Export Records</span>
              </span>
            </ng-template>
          </p-split-button>
        </div>
      </div>
    </app-page-header>

      <!-- Filters moved to drawer -->

      <div class="pt-1">
        <section class="py-3 py-md-3">
          <div>
            <div class="bg-surface-50 dark:bg-surface-950">
              <ag-grid-angular
                (gridReady)="onGridReady($event)"
                [columnDefs]="columnDefs"
                [defaultColDef]="defaultColDef"
                [gridOptions]="gridOptions"
                [rowData]="viewData()"
                aria-label="Daily rollups table"
                style="height: 600px; width: 100%;"
              ></ag-grid-angular>
            </div>

          </div>

        </section>

      </div>


    </div>
  </div>


<app-filter-drawer
  (applySelectedConfig)="applySelectedConfig($event)"
  (clearAllFiltersClick)="clearAllFilters()"
  (resetDateRangeToThisMonthClick)="resetDateRangeToThisMonth()"
  (saveCurrentConfigClick)="saveCurrentConfig()"
  (visibleChange)="visible = $event"
  [countryOptions]="countryOptions()"
  [platformOptions]="platformOptions()"
  [releaseChannelOptions]="releaseChannelOptions()"
  [savedConfigNames]="savedConfigNames()"
  [selectedCountry]="selectedCountry"
  [selectedPlatform]="selectedPlatform"
  [selectedReleaseChannel]="selectedReleaseChannel"
  [selectedSource]="selectedSource"
  [sourceOptions]="sourceOptions()"
  [visible]="visible">
</app-filter-drawer>

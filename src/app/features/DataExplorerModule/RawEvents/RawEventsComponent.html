<div class="">
  <div class=" text-sm lg:pt-20 pt-5">

    <div class="  pt-2 w-full" style="background-color: #FBFBFB!important">

      <div class=" pt-2 ">
        <div class="lg:block">
          <div class="lg:flex justify-content-between pt-2 items-center">

            <div class="pt-2">
              <div class="bg-surface-0 dark:bg-surface-950">

                <div class="flex items-start flex-col md:justify-between md:flex-row">
                  <div>
                    <div class="font-bold text-3xl text-surface-900 dark:text-surface-0 mb-2">Data Explorer (Raw Events)</div>
                    <div class="flex items-center text-surface-700 dark:text-surface-300 flex-wrap gap-8">
                      <div class="flex items-center gap-2">
                        <i class="pi pi-chart-bar text-base! leading-normal!"></i>
                        <span>Find a summary of the different analysis details here</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <div class="lg:flex lg:space-x-2 ">
                <button class="btn custom-btn-primary" (click)="toggleFilterVisibility()" pButton type="submit">
                  <i class="pi pi-filter" pButtonIcon></i>
                  <span pButtonLabel>Select Filter</span>
                </button>

              <p-button severity="contrast" class="ms-2" (click)="exportRecords()">
                <i class="pi pi-download" pButtonIcon></i>
                <span pButtonLabel>Export Records</span>
              </p-button>

            </div>


          </div>
        </div>
      </div>

      <div class=" pt-0">
        <div class="lg:block">
          <div class="lg:flex justify-content-between pt-0 items-center mr-2">

            <div class="pt-2">
              <div class="py-0 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7">
                <div class="relative flex flex-col md:flex-row gap-2 items-start md:items-end">
                  <div class="flex flex-col">
                    <label class="text-xs mb-1">Search</label>
                    <input class="p-inputtext p-component" [ngModel]="filtersService.searchText()" (ngModelChange)="filtersService.searchText.set($event)" placeholder="Type to search..." />
                  </div>
                  <div class="flex flex-col">
                    <label class="text-xs mb-1">Custom Query</label>
                    <input class="p-inputtext p-component" [ngModel]="filtersService.customQuery()" (ngModelChange)="filtersService.customQuery.set($event)" placeholder="e.g. country == 'US' and events_count > 100" />
                  </div>
                  <div class="flex flex-col">
                    <label class="text-xs mb-1">Saved Filters</label>
                    <select class="p-inputtext p-component" [ngModel]="filtersService.selectedConfigName()" (ngModelChange)="applySelectedConfig($event)">
                      <option [ngValue]="null">-- Select --</option>
                      <option *ngFor="let c of filtersService.savedConfigs()" [ngValue]="c.name">{{c.name}}</option>
                    </select>
                  </div>
                  <button class="btn custom-btn-primary ml-2" pButton type="button" (click)="saveCurrentConfig()">
                    <i class="pi pi-save" pButtonIcon></i>
                    <span pButtonLabel>Save</span>
                  </button>
                </div>
              </div>
            </div>

            <div class="lg:flex lg:space-x-2 ">

              <div class="py-0 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7">
              </div>

            </div>


          </div>
        </div>
      </div>

      <div class="pt-1">
        <section class="py-3 py-md-3">
          <div>
            <div class="bg-surface-50 dark:bg-surface-950">
              <ag-grid-angular
                style="height: 600px; width: 100%;"
                aria-label="Raw events table"
                [rowData]="viewData()"
                [columnDefs]="columnDefs"
                [defaultColDef]="defaultColDef"
                [gridOptions]="gridOptions"
                (gridReady)="onGridReady($event)"
              ></ag-grid-angular>
            </div>

          </div>

        </section>

      </div>


    </div>
  </div>
</div>


<app-filter-drawer [visible]="visible" (visibleChange)="visible = $event">
</app-filter-drawer>

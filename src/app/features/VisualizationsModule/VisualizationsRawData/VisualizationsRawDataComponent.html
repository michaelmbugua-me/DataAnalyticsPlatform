<div class="">
  <div class=" text-sm lg:pt-20 pt-5">

    <div class="  pt-2 w-full" style="background-color: #FBFBFB!important">

      <app-page-header
        [title]="'Visualizations (Daily Rollups)'"
        [subtitle]="'Find a summary of the different charts details here'">
        <div actions class="w-100">
          <div class="flex flex-col sm:flex-row w-full items-stretch sm:items-center gap-2 sm:gap-3">
            <p-select
              [options]="savedConfigNames()"
              [ngModel]="filtersService.selectedConfigName()"
              placeholder="Select a Saved Configuration"
              (onChange)="applySelectedConfig($event.value)"
              class="w-full sm:w-64"
            />
            <button
              (click)="toggleFilterVisibility()"
              class="btn custom-btn-primary w-full sm:w-auto"
              pButton
              type="submit">
              <i class="pi pi-plus" pButtonIcon></i>
              <span pButtonLabel>Set Up Filter</span>
            </button>
            <button (click)="printScreen()" class="w-full sm:w-auto" severity="contrast" pButton type="submit">
              <i class="pi pi-download" pButtonIcon></i>
              <span pButtonLabel>Export</span>
            </button>
          </div>
        </div>
      </app-page-header>

      <div class=" pt-0">
        <div class="lg:block">
          <div class="lg:flex justify-content-between pt-0 items-center mr-2">

            <div class="pt-2">
              <div class="py-0 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7">
                <div class="relative">


                </div>
              </div>
            </div>

            <div class="lg:flex lg:space-x-2 ">

              <div class="py-0 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7">
              </div>

            </div>


          </div>
        </div>
      </div>

      <div class="pt-1">
        <section class="py-3 py-md-3">
          <div>
            <div class="bg-surface-50 dark:bg-surface-950">
              @if (chartLoaded) {
                <div class="space-y-6">
                  <!-- Row 1 -->
                  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="performanceChartOptions"></ag-charts>
                    </div>
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="eventsChartOptions"></ag-charts>
                    </div>
                  </div>

                  <!-- Row 2 -->
                  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="platformChartOptions"></ag-charts>
                    </div>
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="deviceTierChartOptions"></ag-charts>
                    </div>
                  </div>

                  <!-- Row 3 -->
                  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="countryChartOptions"></ag-charts>
                    </div>
                    <div class="w-full min-h-[420px] md:min-h-[520px] lg:min-h-[600px] rounded-xl border border-gray-200 bg-white shadow p-4 md:p-6">
                      <ag-charts style="width: 100%; height: 100%" [options]="networkChartOptions"></ag-charts>
                    </div>
                  </div>
                </div>
              } @else {
                <div class="flex justify-center items-center h-screen">
                  <p-progressSpinner></p-progressSpinner>
                </div>
              }
            </div>
          </div>

        </section>

      </div>


    </div>
  </div>
</div>


<app-filter-drawer
  [visible]="visible"
  (visibleChange)="visible = $event"
  [selectedSource]="selectedSource"
  [selectedPlatform]="selectedPlatform"
  [selectedCountry]="selectedCountry"
  [selectedReleaseChannel]="selectedReleaseChannel"
  [sourceOptions]="sourceOptions()"
  [platformOptions]="platformOptions()"
  [countryOptions]="countryOptions()"
  [releaseChannelOptions]="releaseChannelOptions()"
  [savedConfigNames]="savedConfigNames()"
></app-filter-drawer>
